////////////////////////////////////////////////////////////////////////////////////  LINNAEUS UNIVERSITY//  Copyright 2012 Linnaeus university, Media Technology, sweden.//  Some Rights Reserved.////  NOTICE: LNU Media Technology permits you to use and modify this file//  in accordance with the terms of the license agreement accompanying it.//////////////////////////////////////////////////////////////////////////////////package se.lnu.mediatechnology.stickossdk.net{	//------------------------------------------------------------------------------	//	// Imports	//	//------------------------------------------------------------------------------		import flash.events.Event;	import flash.events.IOErrorEvent;	import flash.net.URLLoader;	import flash.net.URLLoaderDataFormat;	import flash.net.URLRequest;	import flash.net.URLRequestMethod;		//------------------------------------------------------------------------------	//	// Public class	//	//------------------------------------------------------------------------------		/**	 * 	 *	-- !WORKING COPY! --	 *		 * 	DESC..	 *	This class is under development and may change in future.	 * 	 *	@author		Henrik Andersen	 *	@version	1.0	 * 	 */	public class HighscorePackage	{		//-----------------------------------------------------------------------		//		// Public properties		//		//-----------------------------------------------------------------------				public var query:String;		public var callback:Function;				//-----------------------------------------------------------------------		//		// Private properties		//		//-----------------------------------------------------------------------				private var urlLoader:URLLoader;				//-----------------------------------------------------------------------		//		// Public properties		//		//-----------------------------------------------------------------------				/**		 * 		 * Constructor.		 *  		 */		public function HighscorePackage()		{					}				//-----------------------------------------------------------------------		//		// Public methods		//		//-----------------------------------------------------------------------				/**		 *		 *	DESC..		 * 		 *	@return void		 *		 */		public function send():void 		{			var request:URLRequest	= new URLRequest();				request.url			= query;				request.method		= URLRequestMethod.GET;						urlLoader 				= new URLLoader();			urlLoader.dataFormat 	= URLLoaderDataFormat.TEXT;						urlLoader.addEventListener(Event.COMPLETE,			loaderComplete);			urlLoader.addEventListener(IOErrorEvent.IO_ERROR,	loaderError);									urlLoader.load(request);		}				//-----------------------------------------------------------------------		//		// Private methods		//		//-----------------------------------------------------------------------				/**		 *		 *	DESC..		 *		 *	@return void		 *		 */		private function loaderComplete(event:Event):void 		{			var callbackParam:XML = new XML(event.target.data);						destroyPackage();						if (callback !== null)				callback(callbackParam);		}				/**		 *		 *	DESC..		 * 		 *	@return void		 *		 */		private function loaderError(event:IOErrorEvent):void 		{			var callbackParam:XML = new XML(event.target.data);						destroyPackage();						if (callback !== null)				callback(callbackParam);		}				/**		 *		 *	DESC..		 * 		 *	@return void		 *		 */		private function destroyPackage():void 		{			urlLoader.removeEventListener(Event.COMPLETE,			loaderComplete);			urlLoader.removeEventListener(IOErrorEvent.IO_ERROR,	loaderError);			urlLoader = null;		}	}}